<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name=referrer content=no-referrer>

		<title>Destrin</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="Premium Bootstrap 4 Landing Page Template" />
		<meta name="keywords" content="bootstrap 4, premium, marketing, multipurpose" />
		<meta content="Themesdesign" name="author" />
		<!-- favicon -->
		<link rel="shortcut icon" href="images/favicon.ico" />
		<!-- css -->
		<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
		<!-- icon -->
		<link href="css/materialdesignicons.min.css" rel="stylesheet" type="text/css" />
		<link href="css/style.css" rel="stylesheet" type="text/css" />
		<script src="https://cdn.bootcdn.net/ajax/libs/vue/3.2.45/vue.global.js"></script>
		<link href="https://cdn.bootcdn.net/ajax/libs/element-plus/2.2.28/index.css" rel="stylesheet" />
		<script src="https://cdn.bootcdn.net/ajax/libs/axios/1.2.5/axios.min.js"></script>
		<script src="https://cdn.bootcdn.net/ajax/libs/element-plus/2.2.28/index.full.js"></script>
	</head>
	<style>
		.bg-home {
		    height: 100vh;
			}
			.spinner {
			  width: 50px;
			  height: 40px;
			  text-align: center;
			  font-size: 10px;
			}
			
			.spinner > div {
			  background-color: #1e57c7 ;
			  height: 100%;
			  width: 6px;
			  display: inline-block;
			  
			  -webkit-animation: sk-stretchdelay 1.2s infinite ease-in-out;
			  animation: sk-stretchdelay 1.2s infinite ease-in-out;
			}
			
			.spinner .rect2 {
			  -webkit-animation-delay: -1.1s;
			  animation-delay: -1.1s;
			}
			
			.spinner .rect3 {
			  -webkit-animation-delay: -1.0s;
			  animation-delay: -1.0s;
			}
			
			.spinner .rect4 {
			  -webkit-animation-delay: -0.9s;
			  animation-delay: -0.9s;
			}
			
			.spinner .rect5 {
			  -webkit-animation-delay: -0.8s;
			  animation-delay: -0.8s;
			}
			
			@-webkit-keyframes sk-stretchdelay {
			  0%, 40%, 100% { -webkit-transform: scaleY(0.4) }  
			  20% { -webkit-transform: scaleY(1.0) }
			}
			
			@keyframes sk-stretchdelay {
			  0%, 40%, 100% { 
			    transform: scaleY(0.4);
			    -webkit-transform: scaleY(0.4);
			  }  20% { 
			    transform: scaleY(1.0);
			    -webkit-transform: scaleY(1.0);
			  }
			}
	</style>
	<body >
		<!--START HOME-->
		<section class="bg-home section bg-lightan" id="home">
			<div class="home-overlay"></div>
			<div class="containers">
				<div class="row justify-content-center">
					<div class="col-lg-8 text-center">
						<img src="images/logo.png" width="200px" alt="">
						<!-- <h2 class="home-title">ChatGPT & OpenAI 搜索</h1>
						<p class="home-desc text-muted mt-3">ChatGPT&OpenAI Search.</p> -->
						<div class="mt-5 home-form rounded">
							<div class="row">
								<div class="col-md-9">
									<div class="form-group mb-0">
										<input type="text" id="urlpath" class="form-control"
											placeholder="在此输入你想问的问题">
									</div>
								</div>
								<div class="col-md-3">


									<div onclick="submitFrom()" class="form-group home-button" style="display: flex;align-items: center;">
										<input type="submit" id="getVideo" name="search" class="btn btn-primary w-100"
											value="提交">
											<div class="spinner" style="display: none;">
											  <div class="rect1"></div>
											  <div class="rect2"></div>
											  <div class="rect3"></div>
											</div>
									</div>
								</div>
								
								<span id="anwser" style="font-size: 13px;line-height: 22px;text-align: initial;margin-top: 17px;white-space: pre-wrap;">正在加载你的答案，请稍等！。
								
								</span>
								
								<!--end col-->
							</div>
							<!--end row-->
						</div>
					</div>
				</div>
			</div>
		</section>
<script src="https://www.jq22.com/jquery/jquery-3.3.1.js"></script>
		<script>
		
			function submitFrom(){
				$(".spinner").css("display","block")
				if($("#urlpath").val()!=""){
					// let data = {
					//   prompt: $("#urlpath").val(),
					//   temperature: 1,
					//   top_p: 1,
					//   model: "gpt-3.5-turbo",
					//   max_tokens: 4000,
					//   frequency_penalty: 0,
					//   presence_penalty: 0,
					//   stop: ["Human:", "AI:"]
					// }
					let data = {
					  model: "gpt-3.5-turbo",
					  messages: [{"role": "user", "content": $("#urlpath").val()}]
					}
					
					 var arr = [
						 "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",
						 "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",
						 "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",
						 "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",
						 "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",
						 "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",
						 "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",
						 "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",
						 "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",
						 "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",
						 "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",
						 "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",
						 "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",
						 "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" 
					 ]
					 var index = parseInt(Math.random() * arr.length);
					 
					  axios.post('https://api.openai.com/v1/chat/completions',
					  {
					    "model": "gpt-3.5-turbo",
					    "messages": [{"role": "user", "content":$("#urlpath").val()}]
					  }
					  , {
					      headers: {
					          'Content-Type': 'application/json',
					          'Authorization': 'Bearer ' + arr[index],
					      }
					  })
					  .then(response => {
						  debugger
						  $(".spinner").css("display","none")
						  const message = response.data.choices[0].message.content;
						  $("#anwser").text(message);
						  $.ajax({
						  	url:"https://bgkj3.baigekeji.com/dewater/wechat/api/chatgpt/add",
						  	data:{
						  		"chatgptQuestion":$("#urlpath").val(),
						  		"chatgptAnswer":$("#anwser").text()
						  	},
						  	type: "POST",
						  	dataType: "json",
						  	success: function(res){
						  		 console.log(res);
						  	}			    
						  })
						  
					  })
					  .catch(error => {
					     $(".spinner").css("display","none")
					     console.log(error);
					     submitFrom()
					  });
					  
				}else{
					alert("请先提问！")
					$(".spinner").css("display","none")
				}
			}
			
		</script>



	</body>
</html>
